<!doctype html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-31S31HGWZ0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-31S31HGWZ0');
  </script>
  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "v2q4i24zi7");
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>눈 나이 테스트 - 당신의 눈은 몇 살? | Eye Health Tools</title>
  <meta name="description" content="무료 눈 나이 테스트! 10가지 질문으로 당신의 눈 건강 상태를 확인하세요. 안과 전문의가 만든 과학적인 테스트.">
  <meta name="keywords" content="눈 나이 테스트, 눈 건강 테스트, 눈 피로 자가진단, eye age test, digital eye strain test, 안구 건강">
  <meta name="author" content="Korean Ophthalmologist">
  <link rel="canonical" href="https://product-build.pages.dev/eye/eye-age.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://product-build.pages.dev/eye/eye-age.html">
  <meta property="og:title" content="내 눈 나이는 몇 살? - 눈 나이 테스트">
  <meta property="og:description" content="10가지 질문으로 알아보는 눈 나이 테스트. 당신의 눈은 몇 살일까요?">
  <meta property="og:site_name" content="Eye Health Tools">
  <meta property="og:locale" content="ko_KR">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="내 눈 나이는 몇 살? - 눈 나이 테스트">
  <meta name="twitter:description" content="10가지 질문으로 알아보는 눈 나이 테스트. 당신의 눈은 몇 살일까요?">

  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "눈 나이 테스트 (Eye Age Test)",
    "url": "https://product-build.pages.dev/eye/eye-age.html",
    "description": "10가지 질문으로 당신의 눈 건강 상태를 확인하는 무료 테스트",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "KRW"
    },
    "author": {
      "@type": "Person",
      "name": "Korean Ophthalmologist",
      "jobTitle": "Board-Certified Ophthalmologist"
    },
    "inLanguage": "ko"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{
      "@type": "Question",
      "name": "눈 나이 테스트란 무엇인가요?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "눈 나이 테스트는 디지털 기기 사용 습관, 눈 관리 습관, 증상 등을 분석하여 실제 나이 대비 눈의 건강 상태를 수치화한 테스트입니다."
      }
    }, {
      "@type": "Question",
      "name": "눈 나이가 실제 나이보다 높으면 어떻게 해야 하나요?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "20-20-20 규칙 준수, 인공눈물 사용, 정기 안과 검진, 취침 전 스마트폰 사용 자제 등의 방법으로 눈 건강을 개선할 수 있습니다."
      }
    }]
  }
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8992259838992521" crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-8992259838992521">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="favicon.svg">

  <!-- Preload critical resources -->
  <link rel="preload" href="style.css" as="style">
  <link href="style.css" rel="stylesheet">

  <style>
    /* Eye Age Test Specific Styles */
    .eye-age-result {
      text-align: center;
      padding: 2rem;
      background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
      border-radius: 20px;
      margin-bottom: 2rem;
    }

    .eye-age-value {
      font-size: 5rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent), #00a88a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: block;
      line-height: 1.2;
    }

    .eye-age-label {
      font-size: 1.5rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    .age-comparison {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
    }

    .age-box {
      padding: 1rem 2rem;
      background: var(--bg-secondary);
      border-radius: 12px;
      text-align: center;
    }

    .age-box-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .age-box-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .age-diff {
      font-size: 1.5rem;
      font-weight: 700;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      display: inline-block;
      margin: 1rem 0;
    }

    .age-diff.positive {
      background: rgba(239, 68, 68, 0.2);
      color: #ff6b6b;
    }

    .age-diff.negative {
      background: rgba(0, 212, 170, 0.2);
      color: var(--accent);
    }

    .grade-badge {
      display: inline-block;
      font-size: 2rem;
      font-weight: 800;
      padding: 0.5rem 1.5rem;
      border-radius: 12px;
      margin: 1rem 0;
    }

    .percentile-text {
      font-size: 1.1rem;
      color: var(--text-secondary);
      margin: 1rem 0;
    }

    .cause-list {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .cause-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.8rem 0;
      border-bottom: 1px solid var(--border);
    }

    .cause-item:last-child {
      border-bottom: none;
    }

    .cause-impact {
      font-weight: 600;
      color: var(--danger);
      white-space: nowrap;
    }

    .share-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
      margin: 1.5rem 0;
    }

    .share-btn {
      padding: 0.8rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .share-btn:hover {
      transform: translateY(-2px);
    }

    .share-btn.kakao {
      background: #FEE500;
      color: #000;
    }

    .share-btn.twitter {
      background: #1DA1F2;
      color: white;
    }

    .share-btn.facebook {
      background: #1877F2;
      color: white;
    }

    .share-btn.copy {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .related-tools {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .related-tool-link {
      display: block;
      padding: 1rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      text-decoration: none;
      color: var(--text-primary);
      text-align: center;
      transition: all 0.3s;
    }

    .related-tool-link:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    @keyframes countUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-in {
      animation: countUp 0.5s ease-out forwards;
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header role="banner">
    <div class="header-content">
      <h1>Eye Health Tools</h1>
      <p class="tagline">눈 나이 테스트</p>
    </div>
    <nav aria-label="Main navigation" class="main-nav">
      <a href="index.html" class="nav-link">Home</a>
      <a href="eye-age.html" class="nav-link active">Eye Age</a>
      <a href="eye-strain.html" class="nav-link">Eye Strain</a>
      <a href="dry-eye.html" class="nav-link">Dry Eye</a>
      <a href="blue-light.html" class="nav-link">Blue Light</a>
      <a href="timer.html" class="nav-link">Timer</a>
    </nav>
    <button type="button" id="theme-toggle" aria-label="Toggle dark/light theme"></button>
  </header>

  <main id="main-content" role="main">
    <a href="index.html" class="back-link" aria-label="Go back to all tools">&#8592; Back to Tools</a>

    <div class="page-title">
      <h2>&#128065; 눈 나이 테스트</h2>
      <p>당신의 눈은 몇 살일까요? 10가지 질문으로 알아보세요!</p>
      <p class="last-updated"><em>안과 전문의가 만든 과학적 테스트</em></p>
    </div>

    <!-- User Context Section -->
    <div class="user-context">
      <h3>이런 분들께 추천해요</h3>
      <div class="context-list">
        <div class="context-item">
          <span class="context-icon">&#128187;</span>
          <div>
            <strong>디지털 기기 많이 사용</strong>
            <span>하루 4시간 이상 화면 보는 분</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128564;</span>
          <div>
            <strong>눈 피로 자주 느끼는 분</strong>
            <span>건조함, 충혈, 시림 증상</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128241;</span>
          <div>
            <strong>스마트폰 헤비유저</strong>
            <span>특히 자기 전 사용하는 분</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128269;</span>
          <div>
            <strong>시력 변화 느끼는 분</strong>
            <span>최근 잘 안 보인다고 느끼시는 분</span>
          </div>
        </div>
      </div>
    </div>

    <div class="calculator-container">
      <div class="progress-bar">
        <div class="progress-fill" id="question-progress" style="width: 0%"></div>
      </div>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
        질문 <span id="current-q">1</span> / 10
      </p>

      <form id="eye-age-form">
        <!-- Q1: 나이 -->
        <div class="question-card" data-question="1">
          <p class="question-text"><strong>Q1.</strong> 당신의 나이는?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="age" data-value="teens">10대 (13-19세)</button>
            <button type="button" class="option-btn" data-key="age" data-value="20s">20대 (20-29세)</button>
            <button type="button" class="option-btn" data-key="age" data-value="30s">30대 (30-39세)</button>
            <button type="button" class="option-btn" data-key="age" data-value="40s">40대 (40-49세)</button>
            <button type="button" class="option-btn" data-key="age" data-value="50s">50대 (50-59세)</button>
            <button type="button" class="option-btn" data-key="age" data-value="60plus">60대 이상</button>
          </div>
        </div>

        <!-- Q2: 스크린 시간 -->
        <div class="question-card" data-question="2" style="display: none;">
          <p class="question-text"><strong>Q2.</strong> 하루 평균 디지털 화면(컴퓨터, 스마트폰, 태블릿, TV)을 얼마나 보시나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="screenTime" data-value="under2">2시간 미만</button>
            <button type="button" class="option-btn" data-key="screenTime" data-value="2to4">2-4시간</button>
            <button type="button" class="option-btn" data-key="screenTime" data-value="4to8">4-8시간</button>
            <button type="button" class="option-btn" data-key="screenTime" data-value="8to12">8-12시간</button>
            <button type="button" class="option-btn" data-key="screenTime" data-value="over12">12시간 이상</button>
          </div>
        </div>

        <!-- Q3: 주요 사용 기기 -->
        <div class="question-card" data-question="3" style="display: none;">
          <p class="question-text"><strong>Q3.</strong> 가장 오래 사용하는 기기는?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="device" data-value="smartphone">스마트폰</button>
            <button type="button" class="option-btn" data-key="device" data-value="laptop">노트북/데스크탑</button>
            <button type="button" class="option-btn" data-key="device" data-value="tablet">태블릿</button>
            <button type="button" class="option-btn" data-key="device" data-value="tv">TV</button>
            <button type="button" class="option-btn" data-key="device" data-value="mixed">여러 기기 혼용</button>
          </div>
        </div>

        <!-- Q4: 화면 거리 -->
        <div class="question-card" data-question="4" style="display: none;">
          <p class="question-text"><strong>Q4.</strong> 화면과 눈 사이 거리는 보통 얼마나 되나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="distance" data-value="under30">30cm 미만 (스마트폰 가까이)</button>
            <button type="button" class="option-btn" data-key="distance" data-value="30to50">30-50cm</button>
            <button type="button" class="option-btn" data-key="distance" data-value="50to70">50-70cm (팔 길이)</button>
            <button type="button" class="option-btn" data-key="distance" data-value="over70">70cm 이상</button>
          </div>
        </div>

        <!-- Q5: 20-20-20 규칙 -->
        <div class="question-card" data-question="5" style="display: none;">
          <p class="question-text"><strong>Q5.</strong> 20분마다 20초간 먼 곳(6m)을 바라보는 '20-20-20 규칙'을 지키시나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="rule2020" data-value="always">항상 지킨다</button>
            <button type="button" class="option-btn" data-key="rule2020" data-value="often">자주 지킨다 (하루 5회 이상)</button>
            <button type="button" class="option-btn" data-key="rule2020" data-value="sometimes">가끔 지킨다 (하루 1-4회)</button>
            <button type="button" class="option-btn" data-key="rule2020" data-value="rarely">거의 안 지킨다</button>
            <button type="button" class="option-btn" data-key="rule2020" data-value="unknown">20-20-20 규칙이 뭔지 모른다</button>
          </div>
        </div>

        <!-- Q6: 인공눈물/안약 사용 -->
        <div class="question-card" data-question="6" style="display: none;">
          <p class="question-text"><strong>Q6.</strong> 인공눈물이나 안약을 얼마나 자주 사용하시나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="artificialTears" data-value="daily">매일 사용</button>
            <button type="button" class="option-btn" data-key="artificialTears" data-value="weekly">일주일에 몇 번</button>
            <button type="button" class="option-btn" data-key="artificialTears" data-value="monthly">가끔 (한 달에 몇 번)</button>
            <button type="button" class="option-btn" data-key="artificialTears" data-value="rarely">거의 사용 안 함</button>
            <button type="button" class="option-btn" data-key="artificialTears" data-value="never">전혀 사용 안 함</button>
          </div>
        </div>

        <!-- Q7: 정기 안과 검진 -->
        <div class="question-card" data-question="7" style="display: none;">
          <p class="question-text"><strong>Q7.</strong> 마지막으로 안과 검진을 받은 게 언제인가요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="checkup" data-value="6months">6개월 이내</button>
            <button type="button" class="option-btn" data-key="checkup" data-value="1year">1년 이내</button>
            <button type="button" class="option-btn" data-key="checkup" data-value="1to2years">1-2년 전</button>
            <button type="button" class="option-btn" data-key="checkup" data-value="over2years">2년 이상 전</button>
            <button type="button" class="option-btn" data-key="checkup" data-value="never">기억 안 남 / 받은 적 없음</button>
          </div>
        </div>

        <!-- Q8: 눈 피로/건조함 -->
        <div class="question-card" data-question="8" style="display: none;">
          <p class="question-text"><strong>Q8.</strong> 눈이 피로하거나 건조하다고 느끼는 빈도는?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="fatigue" data-value="daily">거의 매일</button>
            <button type="button" class="option-btn" data-key="fatigue" data-value="weekly_many">일주일에 여러 번</button>
            <button type="button" class="option-btn" data-key="fatigue" data-value="weekly_few">일주일에 1-2번</button>
            <button type="button" class="option-btn" data-key="fatigue" data-value="monthly">한 달에 몇 번</button>
            <button type="button" class="option-btn" data-key="fatigue" data-value="rarely">거의 느끼지 않음</button>
          </div>
        </div>

        <!-- Q9: 시력 변화 -->
        <div class="question-card" data-question="9" style="display: none;">
          <p class="question-text"><strong>Q9.</strong> 최근 1년간 시력이 나빠졌다고 느끼시나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="visionChange" data-value="much_worse">많이 나빠짐</button>
            <button type="button" class="option-btn" data-key="visionChange" data-value="little_worse">조금 나빠짐</button>
            <button type="button" class="option-btn" data-key="visionChange" data-value="same">변화 없음</button>
            <button type="button" class="option-btn" data-key="visionChange" data-value="better">오히려 좋아짐</button>
            <button type="button" class="option-btn" data-key="visionChange" data-value="unknown">잘 모르겠음</button>
          </div>
        </div>

        <!-- Q10: 수면 전 스마트폰 -->
        <div class="question-card" data-question="10" style="display: none;">
          <p class="question-text"><strong>Q10.</strong> 잠들기 전 침대에서 스마트폰을 사용하시나요?</p>
          <div class="options-group">
            <button type="button" class="option-btn" data-key="bedtimePhone" data-value="daily_long">매일 30분 이상</button>
            <button type="button" class="option-btn" data-key="bedtimePhone" data-value="daily_short">매일 30분 미만</button>
            <button type="button" class="option-btn" data-key="bedtimePhone" data-value="sometimes">가끔 사용</button>
            <button type="button" class="option-btn" data-key="bedtimePhone" data-value="rarely">거의 사용 안 함</button>
            <button type="button" class="option-btn" data-key="bedtimePhone" data-value="never">전혀 사용 안 함</button>
          </div>
        </div>
      </form>

      <!-- Loading Animation -->
      <div id="loading-screen" style="display: none; text-align: center; padding: 3rem;">
        <div style="font-size: 4rem; animation: pulse 1.5s ease-in-out infinite;">&#128065;</div>
        <p style="color: var(--text-secondary); margin-top: 1rem;">눈 나이를 분석 중입니다...</p>
        <div class="progress-bar" style="margin-top: 1rem;">
          <div id="loading-progress" class="progress-fill" style="width: 0%; transition: width 0.5s;"></div>
        </div>
      </div>

      <!-- Result Container -->
      <div class="result-container" id="result">
        <div class="eye-age-result">
          <p style="color: var(--text-secondary); margin-bottom: 0.5rem;">당신의 눈 나이는...</p>
          <span class="eye-age-value animate-in" id="eye-age-value">0</span>
          <span class="eye-age-label">세</span>

          <div class="age-comparison">
            <div class="age-box">
              <span class="age-box-value" id="actual-age">0</span>
              <span class="age-box-label">실제 나이</span>
            </div>
            <div class="age-box">
              <span class="age-box-value" id="eye-age-display">0</span>
              <span class="age-box-label">눈 나이</span>
            </div>
          </div>

          <div class="age-diff" id="age-diff"></div>

          <div class="grade-badge" id="grade-badge"></div>
          <p id="grade-label" style="font-size: 1.2rem; font-weight: 600;"></p>

          <p class="percentile-text" id="percentile-text"></p>
        </div>

        <div class="cause-list">
          <h4 style="color: var(--accent); margin-bottom: 1rem;">&#128203; 주요 원인 분석</h4>
          <div id="cause-items"></div>
        </div>

        <div class="result-details">
          <h4>&#128161; 맞춤 개선 방안</h4>
          <ul id="recommendations"></ul>
        </div>

        <div class="share-buttons">
          <button class="share-btn kakao" onclick="shareKakao()">&#128172; 카카오톡</button>
          <button class="share-btn twitter" onclick="shareTwitter()">&#128038; Twitter</button>
          <button class="share-btn facebook" onclick="shareFacebook()">&#128077; Facebook</button>
          <button class="share-btn copy" onclick="copyLink()">&#128203; 링크 복사</button>
        </div>

        <button type="button" class="btn-primary" style="margin-top: 1rem;" onclick="shareResult()">&#128172; 친구에게 테스트 공유하기</button>

        <button type="button" class="btn-secondary" onclick="resetTest()">다시 테스트하기</button>

        <div class="related-tools" style="margin-top: 2rem;">
          <h4 style="color: var(--accent); margin-bottom: 1rem; grid-column: 1 / -1;">&#128736; 관련 도구 추천</h4>
          <a href="timer.html" class="related-tool-link">&#9202; 20-20-20 타이머 시작하기</a>
          <a href="dry-eye.html" class="related-tool-link">&#128167; 정밀 안구건조증 테스트 (OSDI)</a>
          <a href="blue-light.html" class="related-tool-link">&#128241; 블루라이트 노출량 계산기</a>
        </div>

        <!-- 쿠팡 파트너스 -->
        <div class="affiliate-banner" style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-secondary); border-radius: 12px; text-align: center;">
          <h4 style="color: var(--accent); margin-bottom: 0.5rem;">&#128065; 눈 건강을 위한 추천 상품</h4>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">피로한 눈을 위한 온찜질기</p>
          <div id="coupang-container" style="display: flex; justify-content: center; min-height: 240px; align-items: center;">
            <iframe id="coupang-iframe" src="https://coupa.ng/clpnwK" width="120" height="240" frameborder="0" scrolling="no" referrerpolicy="unsafe-url" browsingtopics onload="this.parentElement.classList.add('loaded')" onerror="this.style.display='none'; this.parentElement.innerHTML='<a href=\'https://link.coupang.com/a/dyAx7o\' target=\'_blank\' style=\'color: var(--accent);\'>&#128065; 쿠팡에서 상품 보기</a>';"></iframe>
          </div>
          <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;">* 쿠팡 파트너스 활동의 일환으로 수수료를 제공받습니다</p>
        </div>
      </div>
    </div>

    <section class="disclaimer">
      <p><strong>&#9881; 안내:</strong> 본 테스트는 참고용이며, 정확한 진단은 안과 전문의와 상담하시기 바랍니다. 눈 건강이 걱정되시면 정기적인 안과 검진을 권장합니다.</p>
    </section>
  </main>

  <footer role="contentinfo">
    <nav aria-label="Footer navigation">
      <a href="index.html">Home</a>
      <a href="eye-age.html">Eye Age</a>
      <a href="eye-strain.html">Eye Strain</a>
      <a href="dry-eye.html">Dry Eye</a>
      <a href="blue-light.html">Blue Light</a>
      <a href="timer.html">Timer</a>
    </nav>
    <p>&copy; 2026 Eye Health Tools. Created by a Korean Ophthalmologist.</p>
  </footer>

  <script>
    // Theme toggle with feedback
    const themeToggle = document.getElementById('theme-toggle');
    const savedTheme = localStorage.getItem('eye-theme') || 'dark';
    if (savedTheme === 'light') {
      document.body.setAttribute('data-theme', 'light');
    }
    themeToggle.addEventListener('click', () => {
      const isLight = document.body.getAttribute('data-theme') === 'light';
      if (isLight) {
        document.body.removeAttribute('data-theme');
        localStorage.setItem('eye-theme', 'dark');
        showThemeToast('Dark mode');
      } else {
        document.body.setAttribute('data-theme', 'light');
        localStorage.setItem('eye-theme', 'light');
        showThemeToast('Light mode');
      }
    });

    function showThemeToast(message) {
      const existing = document.querySelector('.theme-toast');
      if (existing) existing.remove();
      const toast = document.createElement('div');
      toast.className = 'theme-toast';
      toast.textContent = message;
      toast.style.cssText = 'position:fixed;top:80px;right:20px;background:var(--bg-card);color:var(--text-primary);padding:0.75rem 1.5rem;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.3);z-index:9999;animation:fadeInOut 2s forwards;';
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2000);
    }

    // Eye Age Test Logic
    const answers = {};
    let currentQuestion = 1;
    const totalQuestions = 10;

    // Base ages for each age group
    const baseAges = {
      'teens': 16,
      '20s': 25,
      '30s': 35,
      '40s': 45,
      '50s': 55,
      '60plus': 65
    };

    // Score mappings
    const scoreMap = {
      screenTime: { 'under2': -2, '2to4': 0, '4to8': 2, '8to12': 4, 'over12': 6 },
      device: { 'smartphone': 2, 'laptop': 1, 'tablet': 1, 'tv': 0, 'mixed': 1 },
      distance: { 'under30': 3, '30to50': 1, '50to70': 0, 'over70': -1 },
      rule2020: { 'always': -2, 'often': -1, 'sometimes': 1, 'rarely': 3, 'unknown': 4 },
      artificialTears: { 'daily': 2, 'weekly': 1, 'monthly': 0, 'rarely': 0, 'never': 1 },
      checkup: { '6months': -2, '1year': -1, '1to2years': 0, 'over2years': 1, 'never': 2 },
      fatigue: { 'daily': 4, 'weekly_many': 2, 'weekly_few': 1, 'monthly': 0, 'rarely': -1 },
      visionChange: { 'much_worse': 3, 'little_worse': 1, 'same': 0, 'better': -1, 'unknown': 1 },
      bedtimePhone: { 'daily_long': 3, 'daily_short': 2, 'sometimes': 1, 'rarely': 0, 'never': -1 }
    };

    // Cause labels
    const causeLabels = {
      screenTime: { 'over12': '하루 12시간+ 스크린 사용', '8to12': '하루 8-12시간 스크린 사용', '4to8': '하루 4-8시간 스크린 사용' },
      device: { 'smartphone': '스마트폰 주 사용 (가까운 거리)' },
      distance: { 'under30': '화면과 너무 가까운 거리 (30cm 미만)' },
      rule2020: { 'unknown': '20-20-20 규칙 미인지', 'rarely': '20-20-20 규칙 미준수' },
      artificialTears: { 'daily': '만성적 눈 건조 (매일 인공눈물 필요)' },
      checkup: { 'never': '정기 안과 검진 미실시' },
      fatigue: { 'daily': '매일 눈 피로/건조함 경험' },
      visionChange: { 'much_worse': '최근 1년간 시력 많이 저하' },
      bedtimePhone: { 'daily_long': '매일 취침 전 30분+ 스마트폰 사용' }
    };

    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const questionCard = this.closest('.question-card');
        const questionNum = parseInt(questionCard.dataset.question);
        const key = this.dataset.key;
        const value = this.dataset.value;

        // Remove previous selection
        questionCard.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));

        // Add selection
        this.classList.add('selected');

        // Store answer
        answers[key] = value;

        // Move to next question after delay
        setTimeout(() => {
          if (questionNum < totalQuestions) {
            questionCard.style.display = 'none';
            const nextCard = document.querySelector(`[data-question="${questionNum + 1}"]`);
            nextCard.style.display = 'block';
            currentQuestion = questionNum + 1;
            updateProgress();
          } else {
            showLoading();
          }
        }, 300);
      });
    });

    function updateProgress() {
      const progress = (currentQuestion / totalQuestions) * 100;
      document.getElementById('question-progress').style.width = progress + '%';
      document.getElementById('current-q').textContent = currentQuestion;
    }

    function showLoading() {
      document.getElementById('eye-age-form').style.display = 'none';
      document.getElementById('question-progress').parentElement.style.display = 'none';
      document.querySelector('.calculator-container > p').style.display = 'none';

      const loadingScreen = document.getElementById('loading-screen');
      loadingScreen.style.display = 'block';

      let loadingProgress = 0;
      const loadingInterval = setInterval(() => {
        loadingProgress += 10;
        document.getElementById('loading-progress').style.width = loadingProgress + '%';

        if (loadingProgress >= 100) {
          clearInterval(loadingInterval);
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            calculateResult();
          }, 300);
        }
      }, 150);
    }

    function calculateResult() {
      // Calculate adjustment score
      let adjustmentScore = 0;
      const causes = [];

      // Screen time
      const screenScore = scoreMap.screenTime[answers.screenTime] || 0;
      adjustmentScore += screenScore;
      if (screenScore >= 4) causes.push({ label: causeLabels.screenTime[answers.screenTime], impact: `+${screenScore}세` });

      // Device
      const deviceScore = scoreMap.device[answers.device] || 0;
      adjustmentScore += deviceScore;
      if (deviceScore >= 2) causes.push({ label: causeLabels.device[answers.device], impact: `+${deviceScore}세` });

      // Distance
      const distanceScore = scoreMap.distance[answers.distance] || 0;
      adjustmentScore += distanceScore;
      if (distanceScore >= 3) causes.push({ label: causeLabels.distance[answers.distance], impact: `+${distanceScore}세` });

      // 20-20-20 rule
      const ruleScore = scoreMap.rule2020[answers.rule2020] || 0;
      adjustmentScore += ruleScore;
      if (ruleScore >= 3) causes.push({ label: causeLabels.rule2020[answers.rule2020], impact: `+${ruleScore}세` });

      // Artificial tears
      const tearsScore = scoreMap.artificialTears[answers.artificialTears] || 0;
      adjustmentScore += tearsScore;
      if (answers.artificialTears === 'daily') causes.push({ label: causeLabels.artificialTears[answers.artificialTears], impact: `+${tearsScore}세` });

      // Checkup
      const checkupScore = scoreMap.checkup[answers.checkup] || 0;
      adjustmentScore += checkupScore;
      if (answers.checkup === 'never') causes.push({ label: causeLabels.checkup[answers.checkup], impact: `+${checkupScore}세` });

      // Fatigue
      const fatigueScore = scoreMap.fatigue[answers.fatigue] || 0;
      adjustmentScore += fatigueScore;
      if (fatigueScore >= 4) causes.push({ label: causeLabels.fatigue[answers.fatigue], impact: `+${fatigueScore}세` });

      // Vision change
      const visionScore = scoreMap.visionChange[answers.visionChange] || 0;
      adjustmentScore += visionScore;
      if (visionScore >= 3) causes.push({ label: causeLabels.visionChange[answers.visionChange], impact: `+${visionScore}세` });

      // Bedtime phone
      const bedtimeScore = scoreMap.bedtimePhone[answers.bedtimePhone] || 0;
      adjustmentScore += bedtimeScore;
      if (bedtimeScore >= 3) causes.push({ label: causeLabels.bedtimePhone[answers.bedtimePhone], impact: `+${bedtimeScore}세` });

      // Calculate eye age
      const baseAge = baseAges[answers.age];
      let eyeAge = baseAge + adjustmentScore;

      // Limit range
      eyeAge = Math.max(baseAge - 10, Math.min(baseAge + 25, eyeAge));

      // Display result
      displayResult(baseAge, eyeAge, adjustmentScore, causes);
    }

    function getGrade(actualAge, eyeAge) {
      const diff = eyeAge - actualAge;

      if (diff <= -5) return { grade: 'A+', label: '눈 건강 수호자', color: '#10B981' };
      if (diff <= 0) return { grade: 'A', label: '잘 관리하고 있어요', color: '#34D399' };
      if (diff <= 5) return { grade: 'B', label: '조금 주의 필요', color: '#FBBF24' };
      if (diff <= 10) return { grade: 'C', label: '관리가 필요해요', color: '#F97316' };
      if (diff <= 15) return { grade: 'D', label: '눈이 혹사당하고 있어요', color: '#EF4444' };
      return { grade: 'F', label: '지금 당장 관리 시작!', color: '#DC2626' };
    }

    function getPercentile(actualAge, eyeAge) {
      const diff = eyeAge - actualAge;
      const mean = 5;
      const stdDev = 6;
      const zScore = (diff - mean) / stdDev;
      const percentile = Math.round(100 * (1 / (1 + Math.exp(-1.702 * zScore))));
      return percentile;
    }

    function displayResult(actualAge, eyeAge, adjustmentScore, causes) {
      const result = document.getElementById('result');
      const diff = eyeAge - actualAge;
      const grade = getGrade(actualAge, eyeAge);
      const percentile = getPercentile(actualAge, eyeAge);

      // Animate eye age value
      const eyeAgeValueEl = document.getElementById('eye-age-value');
      let currentValue = 0;
      const interval = setInterval(() => {
        currentValue += 1;
        if (currentValue >= eyeAge) {
          currentValue = eyeAge;
          clearInterval(interval);
        }
        eyeAgeValueEl.textContent = currentValue;
      }, 30);

      document.getElementById('actual-age').textContent = actualAge;
      document.getElementById('eye-age-display').textContent = eyeAge;

      // Age difference
      const ageDiffEl = document.getElementById('age-diff');
      if (diff > 0) {
        ageDiffEl.textContent = `+${diff}세 (눈이 더 늙었어요)`;
        ageDiffEl.className = 'age-diff positive';
      } else if (diff < 0) {
        ageDiffEl.textContent = `${diff}세 (눈이 더 젊어요!)`;
        ageDiffEl.className = 'age-diff negative';
      } else {
        ageDiffEl.textContent = '실제 나이와 같아요';
        ageDiffEl.className = 'age-diff negative';
      }

      // Grade badge
      const gradeBadge = document.getElementById('grade-badge');
      gradeBadge.textContent = grade.grade;
      gradeBadge.style.background = grade.color;
      gradeBadge.style.color = 'white';
      document.getElementById('grade-label').textContent = grade.label;

      // Percentile
      const percentileText = document.getElementById('percentile-text');
      if (percentile > 50) {
        percentileText.innerHTML = `&#128200; 상위 ${percentile}%의 눈 혹사자<br><small>(당신보다 눈이 건강한 사람: ${100 - percentile}%)</small>`;
      } else {
        percentileText.innerHTML = `&#128200; 상위 ${100 - percentile}%의 눈 건강 관리자<br><small>(당신보다 눈이 건강하지 않은 사람: ${percentile}%)</small>`;
      }

      // Causes
      const causeItemsEl = document.getElementById('cause-items');
      if (causes.length > 0) {
        causeItemsEl.innerHTML = causes.map(c =>
          `<div class="cause-item"><span>&#9888;</span><span>${c.label}</span><span class="cause-impact">${c.impact}</span></div>`
        ).join('');
      } else {
        causeItemsEl.innerHTML = '<p style="color: var(--text-secondary);">주요 위험 요인이 없습니다. 잘 관리하고 계세요!</p>';
      }

      // Recommendations
      const recommendations = [];
      if (answers.rule2020 === 'unknown' || answers.rule2020 === 'rarely') {
        recommendations.push('<strong>20-20-20 규칙 실천하기</strong><br>20분마다 20초간 6m 밖 바라보기');
      }
      if (answers.bedtimePhone === 'daily_long' || answers.bedtimePhone === 'daily_short') {
        recommendations.push('<strong>취침 1시간 전 스마트폰 끄기</strong><br>멜라토닌 분비 정상화로 숙면에 도움');
      }
      if (answers.artificialTears === 'never' || answers.artificialTears === 'rarely') {
        recommendations.push('<strong>인공눈물 사용 습관화</strong><br>건조함 예방 및 눈 피로 감소');
      }
      if (answers.checkup === 'never' || answers.checkup === 'over2years') {
        recommendations.push('<strong>정기 안과 검진 받기</strong><br>1-2년에 한 번 안과 검진 권장');
      }
      if (answers.distance === 'under30') {
        recommendations.push('<strong>화면과 거리 두기</strong><br>최소 50cm 이상 거리 유지');
      }
      if (answers.screenTime === 'over12' || answers.screenTime === '8to12') {
        recommendations.push('<strong>스크린 시간 줄이기</strong><br>불필요한 화면 사용 시간 줄이기');
      }

      if (recommendations.length === 0) {
        recommendations.push('<strong>현재 습관 유지하기</strong><br>좋은 눈 관리 습관을 유지하세요!');
      }

      document.getElementById('recommendations').innerHTML = recommendations.map(r => `<li>${r}</li>`).join('');

      // Show result
      result.classList.add('visible');
      result.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // Store result for sharing
      window.eyeAgeResult = { eyeAge, actualAge, grade: grade.grade, diff };

      // GA Event Tracking
      if (typeof gtag !== 'undefined') {
        gtag('event', 'eye_age_test_completed', {
          'event_category': 'Tool Usage',
          'event_label': grade.grade,
          'value': eyeAge
        });
      }
    }

    function resetTest() {
      Object.keys(answers).forEach(key => delete answers[key]);
      currentQuestion = 1;

      document.querySelectorAll('.question-card').forEach((card, i) => {
        card.style.display = i === 0 ? 'block' : 'none';
        card.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
      });

      document.getElementById('eye-age-form').style.display = 'block';
      document.getElementById('question-progress').parentElement.style.display = 'block';
      document.querySelector('.calculator-container > p').style.display = 'block';
      document.getElementById('result').classList.remove('visible');

      updateProgress();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Share functions
    function getShareText() {
      const r = window.eyeAgeResult;
      const diffText = r.diff > 0 ? `+${r.diff}세` : `${r.diff}세`;
      return `내 눈 나이는 ${r.eyeAge}세! (실제 나이보다 ${diffText}) 등급: ${r.grade}\n\n너의 눈 나이는 몇 살? 테스트 해봐!`;
    }

    function shareKakao() {
      const url = window.location.href;
      const text = getShareText();
      const kakaoUrl = `https://story.kakao.com/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
      window.open(kakaoUrl, '_blank', 'width=600,height=400');

      if (typeof gtag !== 'undefined') {
        gtag('event', 'share', { 'method': 'kakao', 'content_type': 'eye_age_result' });
      }
    }

    function shareTwitter() {
      const url = window.location.href;
      const text = getShareText();
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}&hashtags=눈나이테스트,눈건강`;
      window.open(twitterUrl, '_blank', 'width=600,height=400');

      if (typeof gtag !== 'undefined') {
        gtag('event', 'share', { 'method': 'twitter', 'content_type': 'eye_age_result' });
      }
    }

    function shareFacebook() {
      const url = window.location.href;
      const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
      window.open(facebookUrl, '_blank', 'width=600,height=400');

      if (typeof gtag !== 'undefined') {
        gtag('event', 'share', { 'method': 'facebook', 'content_type': 'eye_age_result' });
      }
    }

    function copyLink() {
      const url = window.location.href;
      navigator.clipboard.writeText(url).then(() => {
        showThemeToast('링크가 복사되었습니다!');
      });

      if (typeof gtag !== 'undefined') {
        gtag('event', 'share', { 'method': 'copy_link', 'content_type': 'eye_age_result' });
      }
    }

    function shareResult() {
      if (navigator.share) {
        navigator.share({
          title: '눈 나이 테스트 결과',
          text: getShareText(),
          url: window.location.href
        });
      } else {
        copyLink();
      }

      if (typeof gtag !== 'undefined') {
        gtag('event', 'share', { 'method': 'native', 'content_type': 'eye_age_result' });
      }
    }

    updateProgress();
  </script>
  <!-- Userback Feedback Widget -->
  <script>
    window.Userback = window.Userback || {};
    Userback.access_token = "A-dCd3pYRpaT8J3VbfGJYZcGVY9";
    (function(d) {
      var s = d.createElement("script");s.async = true;s.src = "https://static.userback.io/widget/v1.js";(d.head || d.body).appendChild(s);
    })(document);
  </script>

</body>
</html>
