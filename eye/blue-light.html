<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-31S31HGWZ0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-31S31HGWZ0');
  </script>
  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "v2q4i24zi7");
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blue Light Exposure Calculator - Eye Health Tools</title>
  <meta name="description" content="Calculate your daily blue light exposure from digital devices. Understand your risk and get personalized recommendations.">
  <meta name="keywords" content="blue light calculator, blue light exposure, screen time effects, digital device blue light, sleep quality, blue light filter">
  <meta name="author" content="Korean Ophthalmologist">
  <link rel="canonical" href="https://product-build.pages.dev/eye/blue-light.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://product-build.pages.dev/eye/blue-light.html">
  <meta property="og:title" content="Blue Light Exposure Calculator - Eye Health Tools">
  <meta property="og:description" content="Calculate your daily blue light exposure from digital devices. Understand your risk and get personalized recommendations.">
  <meta property="og:site_name" content="Eye Health Tools">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Blue Light Exposure Calculator - Eye Health Tools">
  <meta name="twitter:description" content="Calculate your daily blue light exposure from digital devices.">

  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Blue Light Exposure Calculator",
    "url": "https://product-build.pages.dev/eye/blue-light.html",
    "description": "Calculate your daily blue light exposure from digital devices",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Korean Ophthalmologist"
    }
  }
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8992259838992521" crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-8992259838992521">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="favicon.svg">

  <!-- Preload critical resources -->
  <link rel="preload" href="style.css" as="style">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header role="banner">
    <div class="header-content">
      <h1>Eye Health Tools</h1>
      <p class="tagline">Blue Light Calculator</p>
    </div>
    <nav aria-label="Main navigation" class="main-nav">
      <a href="index.html" class="nav-link">Home</a>
      <a href="eye-strain.html" class="nav-link">Eye Strain</a>
      <a href="dry-eye.html" class="nav-link">Dry Eye</a>
      <a href="blue-light.html" class="nav-link active">Blue Light</a>
      <a href="timer.html" class="nav-link">Timer</a>
    </nav>
    <button id="theme-toggle" aria-label="Toggle dark/light theme"></button>
  </header>

  <main id="main-content" role="main">
    <a href="index.html" class="back-link" aria-label="Go back to all tools">&#8592; Back to Tools</a>

    <div class="page-title">
      <h2>&#128241; Blue Light Exposure Calculator</h2>
      <p>Estimate your daily blue light exposure from digital devices</p>
      <p class="last-updated"><em>Updated January 2026</em></p>
    </div>

    <!-- GEO: User Context Section -->
    <div class="user-context">
      <h3>When Should You Calculate Blue Light Exposure?</h3>
      <div class="context-list">
        <div class="context-item">
          <span class="context-icon">&#127769;</span>
          <div>
            <strong>Sleep Issues</strong>
            <span>Trouble falling asleep after screen use</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128564;</span>
          <div>
            <strong>Night Owl</strong>
            <span>Using screens late at night regularly</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128187;</span>
          <div>
            <strong>Multi-Device User</strong>
            <span>Computer + phone + tablet + TV daily</span>
          </div>
        </div>
        <div class="context-item">
          <span class="context-icon">&#128083;</span>
          <div>
            <strong>Considering Blue Light Glasses</strong>
            <span>Want to know if you need protection</span>
          </div>
        </div>
      </div>
    </div>

    <div class="calculator-container">
      <div class="form-error-summary" id="form-error" role="alert" aria-live="polite"></div>
      <form id="bluelight-form">
        <div class="form-group">
          <label for="computer">Computer/Laptop (hours/day)</label>
          <input type="number" id="computer" min="0" max="24" step="0.5" value="0" required>
          <small>Work or personal computer use</small>
        </div>

        <div class="form-group">
          <label for="smartphone">Smartphone (hours/day)</label>
          <input type="number" id="smartphone" min="0" max="24" step="0.5" value="0" required>
          <small>Browsing, social media, messaging</small>
        </div>

        <div class="form-group">
          <label for="tablet">Tablet/E-reader (hours/day)</label>
          <input type="number" id="tablet" min="0" max="24" step="0.5" value="0" required>
          <small>iPad, Kindle, etc.</small>
        </div>

        <div class="form-group">
          <label for="tv">TV/Monitor (hours/day)</label>
          <input type="number" id="tv" min="0" max="24" step="0.5" value="0" required>
          <small>Entertainment, gaming, streaming</small>
        </div>

        <div class="form-group">
          <label for="led-lighting">LED/Fluorescent Lighting (hours/day)</label>
          <input type="number" id="led-lighting" min="0" max="24" step="0.5" value="0" required>
          <small>Office or home LED lights exposure</small>
        </div>

        <div class="form-group">
          <label for="night-mode">Do you use night mode/blue light filter?</label>
          <select id="night-mode" required>
            <option value="0">No filter used</option>
            <option value="0.7">Software filter (Night Shift, f.lux)</option>
            <option value="0.5">Blue light blocking glasses</option>
            <option value="0.4">Both software + glasses</option>
          </select>
        </div>

        <div class="form-group">
          <label for="night-use">Do you use screens within 2 hours of bedtime?</label>
          <select id="night-use" required>
            <option value="1.3">Yes, frequently</option>
            <option value="1.1">Sometimes</option>
            <option value="1">Rarely or never</option>
          </select>
        </div>

        <button type="submit" class="btn-primary">Calculate Exposure</button>
      </form>

      <div class="result-container" id="result">
        <div class="score-display">
          <span class="score-value" id="score-value">0</span>
          <span class="score-label" id="score-label">Blue Light Units/Day</span>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div class="breakdown" style="background: var(--bg-secondary); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
          <h4 style="color: var(--accent); margin-bottom: 1rem;">Exposure Breakdown</h4>
          <div id="breakdown-chart"></div>
        </div>

        <div class="result-details">
          <h4>Understanding Your Results</h4>
          <p id="risk-description" style="margin-bottom: 1rem; color: var(--text-secondary);"></p>
          <h4 style="margin-top: 1.5rem;">Recommendations</h4>
          <ul id="recommendations"></ul>
        </div>

        <button type="button" class="btn-secondary" onclick="resetForm()">Calculate Again</button>

        <!-- Premium CTA -->
        <div class="premium-cta" id="premium-cta">
          <div class="premium-badge">&#128142; Premium</div>
          <h3>Get Your Personalized Blue Light Protection Plan</h3>
          <p>Unlock a comprehensive analysis powered by AI:</p>
          <ul class="premium-features">
            <li>&#10003; Personalized device usage optimization schedule</li>
            <li>&#10003; Custom blue light filter settings for each device</li>
            <li>&#10003; Sleep quality improvement recommendations</li>
            <li>&#10003; Best blue light blocking glasses for your needs</li>
            <li>&#10003; Circadian rhythm restoration plan</li>
            <li>&#10003; Weekly progress tracking template</li>
          </ul>
          <button class="btn-premium" onclick="showEyePremiumModal()">
            Get Premium Report - $4.99
          </button>
          <p class="premium-guarantee">&#128274; One-time payment &bull; Instant PDF delivery</p>
        </div>

        <!-- Ïø†Ìå° ÌååÌä∏ÎÑàÏä§: Îàà Í±¥Í∞ï ÏÉÅÌíà -->
        <div class="affiliate-banner" style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-secondary); border-radius: 12px; text-align: center;">
          <h4 style="color: var(--accent); margin-bottom: 0.5rem;">üëÅÔ∏è Îàà Í±¥Í∞ïÏùÑ ÏúÑÌïú Ï∂îÏ≤ú ÏÉÅÌíà</h4>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Î∏îÎ£®ÎùºÏù¥Ìä∏Î°ú ÏßÄÏπú ÎààÏùÑ ÏúÑÌïú Ïò®Ï∞úÏßàÍ∏∞</p>
          <div style="display: flex; justify-content: center;">
            <iframe src="https://coupa.ng/clpnwK" width="120" height="240" frameborder="0" scrolling="no" referrerpolicy="unsafe-url" browsingtopics></iframe>
          </div>
          <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;">* Ïø†Ìå° ÌååÌä∏ÎÑàÏä§ ÌôúÎèôÏùò ÏùºÌôòÏúºÎ°ú ÏàòÏàòÎ£åÎ•º Ï†úÍ≥µÎ∞õÏäµÎãàÎã§</p>
        </div>
      </div>
    </div>

    <!-- Premium Modal -->
    <div class="premium-modal" id="premium-modal" role="dialog" aria-modal="true" aria-labelledby="premium-modal-title">
      <div class="premium-modal-content">
        <button class="modal-close" onclick="closeEyePremiumModal()" aria-label="Close modal">&times;</button>
        <div class="premium-badge" style="margin-bottom: 1rem;">&#128142; Premium Report</div>
        <h2 id="premium-modal-title">Your Personalized Blue Light Protection Plan</h2>
        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
          Get an AI-powered comprehensive analysis tailored to your specific blue light exposure patterns.
        </p>

        <div class="premium-modal-features">
          <div class="premium-feature-item">
            <span class="feature-icon">&#128197;</span>
            <div>
              <strong>Optimized Daily Schedule</strong>
              <p>Custom screen time recommendations based on your lifestyle</p>
            </div>
          </div>
          <div class="premium-feature-item">
            <span class="feature-icon">&#128083;</span>
            <div>
              <strong>Glasses Recommendations</strong>
              <p>Best blue light blocking glasses matched to your exposure level</p>
            </div>
          </div>
          <div class="premium-feature-item">
            <span class="feature-icon">&#127769;</span>
            <div>
              <strong>Sleep Optimization</strong>
              <p>Circadian rhythm restoration and sleep quality improvement tips</p>
            </div>
          </div>
          <div class="premium-feature-item">
            <span class="feature-icon">&#128200;</span>
            <div>
              <strong>Progress Tracker</strong>
              <p>Weekly template to monitor your improvement</p>
            </div>
          </div>
        </div>

        <div class="premium-price-box">
          <span class="price">$4.99</span>
          <span class="price-note">One-time payment</span>
        </div>

        <button class="btn-premium btn-large" onclick="handleEyePremiumPurchase()">
          &#128274; Unlock Premium Report
        </button>

        <p class="premium-trust" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
          &#9989; Secure payment via Stripe &bull; Instant delivery &bull; Money-back guarantee
        </p>
      </div>
    </div>

    <section class="about" style="margin-top: 3rem;">
      <h2>About Blue Light</h2>
      <div class="trust-points">
        <div class="trust-item">
          <span class="trust-icon">&#127774;</span>
          <h4>Natural Source</h4>
          <p>Sunlight is the largest source of blue light. Digital devices emit much smaller amounts.</p>
        </div>
        <div class="trust-item">
          <span class="trust-icon">&#128564;</span>
          <h4>Sleep Impact</h4>
          <p>Blue light suppresses melatonin production, which can affect your sleep quality.</p>
        </div>
        <div class="trust-item">
          <span class="trust-icon">&#128161;</span>
          <h4>Research Status</h4>
          <p>Long-term eye damage from screen blue light is not conclusively proven, but reducing exposure before bed is beneficial.</p>
        </div>
      </div>
    </section>

    <section class="disclaimer">
      <p><strong>Medical Disclaimer:</strong> This calculator provides estimates for educational purposes. Blue light exposure levels are approximations. Consult an eye care professional for personalized advice.</p>
    </section>
  </main>

  <footer role="contentinfo">
    <nav aria-label="Footer navigation">
      <a href="index.html">Home</a>
      <a href="eye-strain.html">Eye Strain</a>
      <a href="dry-eye.html">Dry Eye</a>
      <a href="blue-light.html">Blue Light</a>
      <a href="timer.html">Timer</a>
    </nav>
    <p>&copy; 2026 Eye Health Tools. Created by a Korean Ophthalmologist.</p>
  </footer>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const savedTheme = localStorage.getItem('eye-theme') || 'dark';
    if (savedTheme === 'light') {
      document.body.setAttribute('data-theme', 'light');
    }
    themeToggle.addEventListener('click', () => {
      const isLight = document.body.getAttribute('data-theme') === 'light';
      if (isLight) {
        document.body.removeAttribute('data-theme');
        localStorage.setItem('eye-theme', 'dark');
      } else {
        document.body.setAttribute('data-theme', 'light');
        localStorage.setItem('eye-theme', 'light');
      }
    });

    // Blue light emission rates (relative units)
    const emissionRates = {
      computer: 12,      // High blue light emission
      smartphone: 15,    // Highest (close viewing distance)
      tablet: 10,        // Moderate-high
      tv: 6,             // Lower (farther viewing distance)
      led: 4             // Indoor LED lighting
    };

    const form = document.getElementById('bluelight-form');
    const result = document.getElementById('result');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const computer = parseFloat(document.getElementById('computer').value) || 0;
      const smartphone = parseFloat(document.getElementById('smartphone').value) || 0;
      const tablet = parseFloat(document.getElementById('tablet').value) || 0;
      const tv = parseFloat(document.getElementById('tv').value) || 0;
      const led = parseFloat(document.getElementById('led-lighting').value) || 0;
      const filterFactor = parseFloat(document.getElementById('night-mode').value);
      const nightFactor = parseFloat(document.getElementById('night-use').value);

      // Validation: At least one device should have usage > 0
      const totalHours = computer + smartphone + tablet + tv + led;
      if (totalHours === 0) {
        showFormError('Please enter your screen time for at least one device.');
        return;
      }

      clearFormError();

      // Calculate individual exposures
      const exposures = {
        'Computer': computer * emissionRates.computer,
        'Smartphone': smartphone * emissionRates.smartphone,
        'Tablet': tablet * emissionRates.tablet,
        'TV': tv * emissionRates.tv,
        'LED Lighting': led * emissionRates.led
      };

      // Total raw exposure
      let totalRaw = Object.values(exposures).reduce((a, b) => a + b, 0);

      // Apply filter reduction
      const filterReduction = filterFactor;
      const totalWithFilter = totalRaw * filterReduction;

      // Apply night use multiplier (affects circadian impact)
      const finalScore = Math.round(totalWithFilter * nightFactor);

      displayResult(finalScore, exposures, totalRaw);
    });

    function displayResult(score, exposures, rawTotal) {
      const scoreValue = document.getElementById('score-value');
      const scoreLabel = document.getElementById('score-label');
      const progressFill = document.getElementById('progress-fill');
      const breakdownChart = document.getElementById('breakdown-chart');
      const riskDesc = document.getElementById('risk-description');
      const recommendations = document.getElementById('recommendations');

      // Animate score
      let current = 0;
      const maxDisplay = Math.min(score, 300);
      const interval = setInterval(() => {
        current += 5;
        if (current >= score) {
          current = score;
          clearInterval(interval);
        }
        scoreValue.textContent = current;
      }, 20);

      // Progress bar (normalized to 200 as "high")
      const progressPercent = Math.min((score / 200) * 100, 100);
      progressFill.style.width = progressPercent + '%';

      // Color based on level
      scoreValue.className = 'score-value';
      if (score <= 50) {
        scoreValue.classList.add('score-low');
        progressFill.style.background = 'var(--success)';
      } else if (score <= 120) {
        scoreValue.classList.add('score-medium');
        progressFill.style.background = 'var(--warning)';
      } else {
        scoreValue.classList.add('score-high');
        progressFill.style.background = 'var(--danger)';
      }

      // Create breakdown chart
      const maxExposure = Math.max(...Object.values(exposures), 1);
      breakdownChart.innerHTML = Object.entries(exposures)
        .filter(([_, value]) => value > 0)
        .map(([device, value]) => {
          const percent = (value / rawTotal * 100).toFixed(0);
          const barWidth = (value / maxExposure * 100);
          return `
            <div style="margin-bottom: 0.8rem;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                <span>${device}</span>
                <span style="color: var(--text-secondary);">${percent}%</span>
              </div>
              <div style="height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                <div style="height: 100%; width: ${barWidth}%; background: var(--accent); border-radius: 4px;"></div>
              </div>
            </div>
          `;
        }).join('') || '<p style="color: var(--text-secondary);">No device usage entered</p>';

      // Risk description
      if (score <= 50) {
        riskDesc.textContent = 'Your blue light exposure is within a healthy range. Your current habits are good for maintaining eye health and sleep quality.';
      } else if (score <= 120) {
        riskDesc.textContent = 'Your blue light exposure is moderate. Consider implementing some protective measures, especially before bedtime.';
      } else {
        riskDesc.textContent = 'Your blue light exposure is high. This may affect your sleep quality and could cause digital eye strain. Consider reducing screen time or using protective measures.';
      }

      // Recommendations
      const recs = [];

      if (score > 100) {
        recs.push('Reduce overall screen time where possible');
      }

      const smartphone = parseFloat(document.getElementById('smartphone').value) || 0;
      if (smartphone > 4) {
        recs.push('Limit smartphone use to essential tasks');
      }

      const nightMode = parseFloat(document.getElementById('night-mode').value);
      if (nightMode > 0.7) {
        recs.push('Enable Night Shift/Night Mode on all devices');
        recs.push('Consider blue light blocking glasses for extended use');
      }

      const nightUse = parseFloat(document.getElementById('night-use').value);
      if (nightUse > 1) {
        recs.push('Avoid screens 1-2 hours before bedtime for better sleep');
        recs.push('If you must use devices at night, use maximum blue light reduction');
      }

      if (score <= 50) {
        recs.push('Keep up your healthy screen habits!');
        recs.push('Remember to take regular breaks (20-20-20 rule)');
      }

      recs.push('Get natural sunlight exposure during the day for healthy circadian rhythm');

      recommendations.innerHTML = recs.map(r => `<li>${r}</li>`).join('');

      result.classList.add('visible');
      result.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // GA Event Tracking
      if (typeof gtag !== 'undefined') {
        gtag('event', 'blue_light_calculated', {
          'event_category': 'Tool Usage',
          'event_label': score <= 50 ? 'Low Exposure' : score <= 120 ? 'Moderate Exposure' : 'High Exposure',
          'value': score
        });
      }
    }

    function resetForm() {
      form.reset();
      result.classList.remove('visible');
      clearFormError();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showFormError(message) {
      const errorDiv = document.getElementById('form-error');
      errorDiv.textContent = message;
      errorDiv.classList.add('visible');
      errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function clearFormError() {
      const errorDiv = document.getElementById('form-error');
      errorDiv.textContent = '';
      errorDiv.classList.remove('visible');
    }

    // Premium Modal Functions
    const EYE_STRIPE_LINK = 'https://buy.stripe.com/YOUR_EYE_PAYMENT_LINK';

    function showEyePremiumModal() {
      const modal = document.getElementById('premium-modal');
      if (modal) {
        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
        // GA tracking
        if (typeof gtag !== 'undefined') {
          gtag('event', 'premium_modal_opened', {
            'event_category': 'Premium',
            'event_label': 'Blue Light Tool'
          });
        }
      }
    }

    function closeEyePremiumModal() {
      const modal = document.getElementById('premium-modal');
      if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = '';
      }
    }

    function handleEyePremiumPurchase() {
      // GA tracking
      if (typeof gtag !== 'undefined') {
        gtag('event', 'begin_checkout', {
          'event_category': 'Premium',
          'event_label': 'Blue Light Tool',
          'value': 4.99,
          'currency': 'USD'
        });
      }

      // Create client reference with test data
      const clientRef = btoa(JSON.stringify({
        tool: 'blue-light',
        score: document.getElementById('score-value')?.textContent || 'N/A',
        timestamp: new Date().toISOString()
      }));

      window.location.href = `${EYE_STRIPE_LINK}?client_reference_id=${clientRef}`;
    }

    // Close modal on outside click
    document.getElementById('premium-modal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeEyePremiumModal();
      }
    });

    // Close modal on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeEyePremiumModal();
      }
    });
  </script>
</body>
</html>
